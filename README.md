# WebSocket API

## üìà Market Assets Price API

–¶–µ REST+WebSocket API-—Å–µ—Ä–≤—ñ—Å –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è **—ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö** —Ç–∞ **—Ä–µ–∞–ª—å–Ω–∏—Ö** —Ü—ñ–Ω —Ä–∏–Ω–∫–æ–≤–∏—Ö –∞–∫—Ç–∏–≤—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `EUR/USD`, `GOOG`) –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ **Fintacharts**.

---

## üßæ –ó–º—ñ—Å—Ç

- [–û–ø–∏—Å](#–æ–ø–∏—Å)
- [–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker](#–∑–∞–ø—É—Å–∫-—á–µ—Ä–µ–∑-docker)
- [Swagger](#swagger)
- [API –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏](#api-–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏)
- [–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥–∏-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)

---

## üìå –û–ø–∏—Å

–¶–µ–π –ø—Ä–æ—î–∫—Ç –Ω–∞–¥–∞—î API –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ä–∏–Ω–∫–æ–≤–∏–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ WebSocket –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ –≤—ñ–¥ Fintacharts —Ç–∞ REST –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:

- üß† –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∞–∫—Ç–∏–≤—ñ–≤ —Ç–∞ —ñ—Å—Ç–æ—Ä—ñ—ó —Ü—ñ–Ω —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö **SQL Server** –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º **Entity Framework Core**.
- üåê –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API —á–µ—Ä–µ–∑ **Swagger UI**.
- üê≥ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **Docker** –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è –∑–∞–ø—É—Å–∫—É —Ç–∞ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è.
- üì° –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ü—ñ–Ω –∞–∫—Ç–∏–≤—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ —á–µ—Ä–µ–∑ WebSocket-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è.

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### 1. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π

```bash
git clone https://github.com/Rostyslav-Bodnar/WebSocketAPI.git
cd WebSocket_API
```

–ê–±–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ docker-compose.yml –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—è

### 2. –ü–æ–±—É–¥—É–≤–∞—Ç–∏ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏

```bash
docker-compose up --build -d
```

–¶—è –∫–æ–º–∞–Ω–¥–∞:
- –ë—É–¥—É—î –æ–±—Ä–∞–∑ –¥–ª—è API (`rostyslav05/websocket-api:latest`).
- –ó–∞–ø—É—Å–∫–∞—î –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä SQL Server (`mcr.microsoft.com/mssql/server:2022-latest`).
- –ù–∞–ª–∞—à—Ç–æ–≤—É—î –º–µ—Ä–µ–∂—É –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –º—ñ–∂ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

### 3. –î–æ—Å—Ç—É–ø –¥–æ API

API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–µ –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
üîó [http://localhost:8080](http://localhost:8080)

## üß™ Swagger

–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ Swagger UI:
üîó [http://localhost:8080](http://localhost:8080)

---

## üì° API –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| –ú–µ—Ç–æ–¥   | –®–ª—è—Ö                              | –û–ø–∏—Å                                      |
|---------|-----------------------------------|-------------------------------------------|
| `GET`   | `/api/asset/supported`           | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –∞–∫—Ç–∏–≤—ñ–≤      |
| `GET`   | `/api/asset/prices?assetIds=1,2` | –û—Ç—Ä–∏–º–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ —Ü—ñ–Ω–∏ –¥–ª—è –≤–∫–∞–∑–∞–Ω–∏—Ö –∞–∫—Ç–∏–≤—ñ–≤ |
| `GET`   | `/api/asset/{symbol}`            | –û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∞–∫—Ç–∏–≤ –∑–∞ —Å–∏–º–≤–æ–ª–æ–º |
| `DELETE`| `/api/asset/symbol?symbol={symbol}` | –í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –≤—ñ–¥ –∞–∫—Ç–∏–≤—É —Ç–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –π–æ–≥–æ |
| `GET`   |  `/api/asset/symbol?symbols={symbol}&symbols={symbol}` | –û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∞–∫—Ç–∏–≤–∏ |

### –ü—Ä–∏–∫–ª–∞–¥–∏ –∑–∞–ø–∏—Ç—ñ–≤

1. **–û—Ç—Ä–∏–º–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –∞–∫—Ç–∏–≤–∏**:
   ```bash
   curl http://localhost:8080/api/asset/supported
   ```

2. **–û—Ç—Ä–∏–º–∞—Ç–∏ —Ü—ñ–Ω–∏ –¥–ª—è –∞–∫—Ç–∏–≤—ñ–≤**:
   ```bash
   curl "http://localhost:8080/api/asset/prices?assetIds=1&assetIds=2"
   ```

3. **–û—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∞–∫—Ç–∏–≤**:
   ```bash
   curl http://localhost:8080/api/asset/symbol?symbol=EUR/FUSD?providerName=alpaca
   ```

4. **–í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫—Ç–∏–≤**:
   ```bash
   curl -X DELETE http://localhost:8080/api/asset/symbol?symbol=EUR/FUSD
   ```

---

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∞–∫—Ç–∏–≤—É –∑–∞ —Å–∏–º–≤–æ–ª–æ–º

```bash
curl -X GET "http://localhost:8080/api/asset/AAPL?providerName=alpaca"
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å**:
```json
[
  {
    "instrumentId": "914f3cf3-0d91-4240-b27e-6479d88df25c",
    "provider": "alpaca",
    "symbol": "AAPL",
    "price": 150.25,
    "updatedAt": "2025-07-05T18:30:00Z",
    "change": 1.25
  }
]
```

### 2. –í–∏–¥–∞–ª–µ–Ω–Ω—è –∞–∫—Ç–∏–≤—É

```bash
curl -X DELETE "http://localhost:8080/api/asset/symbol?symbol=AAPL"
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å**:
```json
{
  "instrumentId": "914f3cf3-0d91-4240-b27e-6479d88df25c",
  "provider": "alpaca",
  "symbol": "AAPL",
  "price": 150.25,
  "updatedAt": "2025-07-05T18:30:00Z",
  "change": 1.25
}
```

### 3. WebSocket –ø—ñ–¥–ø–∏—Å–∫–∞

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–∫—Ç–∏–≤—É —á–µ—Ä–µ–∑ `GET /api/asset/{symbol}`, —Å–µ—Ä–≤—ñ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ–Ω —á–µ—Ä–µ–∑ WebSocket. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è:

```bash
docker logs websocket_api-api-1
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π –ª–æ–≥:
```
info: WebSocket_API.Services.WebSocket.WebSocketClientService[0]
      WebSocket connected to wss://platform.fintacharts.com/...
info: WebSocket_API.Services.WebSocket.WebSocketSubscriptionService[0]
      Sent subscription request for InstrumentId: 914f3cf3-0d91-4240-b27e-6479d88df25c, Provider: alpaca
```

